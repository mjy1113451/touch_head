# touch_head - 摸头杀插件

AstrBot 摸头杀插件 - 当用户拍机器人时自动生成并发送摸头GIF动图。

## 功能特性

- 🎯 **自动响应拍一拍**: 当用户在QQ群中"拍一拍"机器人时，自动生成并发送摸头杀GIF
- 🖼️ **动态生成**: 使用用户QQ头像实时生成个性化摸头GIF
- ⌨️ **手动触发**: 支持通过 `/摸摸@用户` 命令手动触发
- ✨ **精美动画**: 20帧流畅动画，包含完整手部和挤压效果

## 依赖

- Pillow >= 10.0.0
- aiohttp >= 3.8.0
### 触发
发送命令：
```
/摸摸@用户
```

## 平台支持

- ✅ QQ (通过 NapCat / aiocqhttp 适配器)
- ⚠️ 其他平台暂不支持拍一拍事件

## 安装

1. 将插件放入 AstrBot 的 `data/plugins/` 目录
2. 重启 AstrBot 或在插件管理页面重载插件

## 配置说明

无需额外配置，安装后即可使用。

## 技术实现

- 使用 Pillow 库本地生成GIF动画
- 通过 QQ 官方头像 API 获取用户头像
- 监听 OneBot v11 协议的 `notice.notify.poke` 事件
- 使用 base64 编码发送图片，兼容性更好

## 更新日志

### v1.1.0
- 🎨 重构动画效果，更流畅的摸头动画
- ✨ 新增 20 帧动画，每帧 50ms
- 🖐️ 完整的手部绘制（包含手掌和 5 根手指）
- 📐 更大的画布尺寸 (256x256)，更清晰的图像
- 🔄 头像挤压效果优化，使用正弦波实现自然变形
- 📤 改用 base64 编码发送图片，解决文件路径兼容性问题
- 🔧 添加备用头像 URL，提高头像获取成功率

### v1.0.0
- 🎉 初始版本发布
- ✅ 支持拍一拍事件触发
- ✅ 支持手动命令触发
- ✅ 基础摸头 GIF 生成

## 支持

[AstrBot 官方文档](https://astrbot.app)
